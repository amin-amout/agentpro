{
  "SystemOverview": {
    "title": "JavaScript Ping Pong Game",
    "description": "A lightweight, browser-based, real-time ping pong game built with HTML5 Canvas and vanilla JavaScript. The architecture follows a modular single-page application pattern, enabling easy extension, unit testing, and responsive UI across desktop and mobile browsers.",
    "corePrinciples": [
      "Pure client-side - no server required",
      "ES6 modules for encapsulation",
      "High frame-rate (>=60 FPS) via requestAnimationFrame",
      "Responsive canvas with aspect-ratio preservation",
      "Persist high scores locally using localStorage",
      "Zero external dependencies"
    ]
  },
  "ComponentArchitecture": {
    "modules": [
      {
        "name": "GameEngine",
        "responsibilities": [
          "Orchestrates game loop",
          "Manages state transitions (start, pause, reset)",
          "Coordinates physics, AI, and rendering each frame"
        ],
        "publicApi": [
          "start()",
          "pause()",
          "reset()",
          "setMode(mode)",
          "setDifficulty(level)"
        ]
      },
      {
        "name": "CanvasRenderer",
        "responsibilities": [
          "Draws paddles, ball, net, scoreboard",
          "Handles responsive resizing",
          "Applies visual feedback (flashing ball, paddle color change)"
        ],
        "publicApi": [
          "render(state)",
          "resize(width, height)"
        ]
      },
      {
        "name": "PhysicsEngine",
        "responsibilities": [
          "Calculates ball velocity and angle",
          "Detects collisions (paddle, walls, net)",
          "Applies friction and speed scaling"
        ],
        "publicApi": [
          "updateBall(state, deltaTime)",
          "handleCollision(state)"
        ]
      },
      {
        "name": "Paddle",
        "responsibilities": [
          "Encapsulates paddle position, size, and movement constraints",
          "Exposes methods to update based on input or AI"
        ],
        "publicApi": [
          "moveTo(y)",
          "clamp()",
          "getBounds()"
        ]
      },
      {
        "name": "Ball",
        "responsibilities": [
          "Encapsulates ball position, velocity, radius",
          "Provides methods to reset and update position"
        ],
        "publicApi": [
          "reset()",
          "update(deltaTime)"
        ]
      },
      {
        "name": "AI",
        "responsibilities": [
          "Computes paddle movement based on ball position and difficulty",
          "Implements reaction delay and anticipation"
        ],
        "publicApi": [
          "update(state)",
          "setDifficulty(level)"
        ]
      },
      {
        "name": "InputHandler",
        "responsibilities": [
          "Maps mouse, touch, and keyboard events to paddle movement",
          "Ensures separation of control for each player"
        ],
        "publicApi": [
          "init()",
          "destroy()",
          "getPlayerInput()"
        ]
      },
      {
        "name": "ScoreManager",
        "responsibilities": [
          "Tracks current score and high score",
          "Persists high score to localStorage",
          "Notifies UI on score changes"
        ],
        "publicApi": [
          "increment(player)",
          "reset()",
          "getScores()",
          "loadHighScore()",
          "saveHighScore()"
        ]
      },
      {
        "name": "SettingsManager",
        "responsibilities": [
          "Holds game mode, difficulty, best-of settings",
          "Provides UI for changing settings"
        ],
        "publicApi": [
          "setMode()",
          "setDifficulty()",
          "getSettings()"
        ]
      },
      {
        "name": "EventBus",
        "responsibilities": [
          "Facilitates decoupled communication between modules",
          "Publishes events such as 'pointScored', 'gameOver'"
        ],
        "publicApi": [
          "on(event, handler)",
          "emit(event, payload)"
        ]
      },
      {
        "name": "Utils",
        "responsibilities": [
          "Common helper functions (random angle, clamp, debounce, etc.)"
        ],
        "publicApi": [
          "randomAngle()",
          "clamp(value, min, max)",
          "debounce(fn, delay)"
        ]
      }
    ]
  },
  "DataModel": {
    "GameState": {
      "players": [
        {
          "id": "player1",
          "paddle": {
            "x": 20,
            "y": 0,
            "width": 10,
            "height": 80
          },
          "score": 0,
          "color": "#FF5722"
        },
        {
          "id": "player2",
          "paddle": {
            "x": "canvasWidth - 30",
            "y": 0,
            "width": 10,
            "height": 80
          },
          "score": 0,
          "color": "#2196F3"
        }
      ],
      "ball": {
        "x": 0,
        "y": 0,
        "radius": 8,
        "velocityX": 0,
        "velocityY": 0,
        "speed": 300
      },
      "settings": {
        "mode": "single",
        "difficulty": "medium",
        "bestOf": 5
      },
      "status": "stopped | running | paused | finished",
      "highScore": 0
    },
    "EventPayloads": {
      "pointScored": {
        "player": "player1 | player2",
        "score": 0
      },
      "gameOver": {
        "winner": "player1 | player2",
        "score": 0
      }
    }
  },
  "APIDesign": {
    "public": {
      "GameEngine": {
        "methods": [
          {
            "name": "start",
            "description": "Begins or resumes the game loop.",
            "parameters": [],
            "returns": "void"
          },
          {
            "name": "pause",
            "description": "Pauses the game loop.",
            "parameters": [],
            "returns": "void"
          },
          {
            "name": "reset",
            "description": "Resets all state to initial configuration.",
            "parameters": [],
            "returns": "void"
          },
          {
            "name": "setMode",
            "description": "Selects 'single' or 'two'.",
            "parameters": [
              {
                "name": "mode",
                "type": "string"
              }
            ],
            "returns": "void"
          },
          {
            "name": "setDifficulty",
            "description": "Sets AI difficulty level.",
            "parameters": [
              {
                "name": "level",
                "type": "string"
              }
            ],
            "returns": "void"
          }
        ]
      },
      "ScoreManager": {
        "methods": [
          {
            "name": "increment",
            "parameters": [
              {
                "name": "playerId",
                "type": "string"
              }
            ],
            "returns": "void"
          },
          {
            "name": "reset",
            "returns": "void"
          },
          {
            "name": "getScores",
            "returns": "{ player1: number, player2: number }"
          }
        ]
      },
      "SettingsManager": {
        "methods": [
          {
            "name": "getSettings",
            "returns": "{ mode: string, difficulty: string, bestOf: number }"
          }
        ]
      }
    },
    "events": [
      "pointScored",
      "gameOver",
      "scoreUpdated",
      "settingsChanged"
    ]
  },
  "TechnologyStack": {
    "frontend": [
      "HTML5 (semantic markup)",
      "CSS3 (flexbox, media queries, custom properties)",
      "JavaScript ES6+ modules",
      "Canvas API (2D context)",
      "localStorage for persistence"
    ],
    "buildTools": [
      "npm (scripts only - no external libs)",
      "Babel (transpile to ES5 for legacy browsers if needed)",
      "Webpack / Rollup (module bundler, optional)",
      "ESLint (linting)",
      "Jest (unit testing)",
      "GitHub Actions (CI/CD)"
    ],
    "deployment": [
      "GitHub Pages / Netlify (static hosting)",
      "HTTPS enforced"
    ]
  },
  "DeploymentArchitecture": {
    "hosting": "Static file hosting (GitHub Pages or Netlify)",
    "CI": {
      "workflow": "GitHub Actions",
      "triggers": [
        "push",
        "pull_request"
      ],
      "jobs": [
        {
          "name": "Lint",
          "steps": [
            "install",
            "eslint"
          ]
        },
        {
          "name": "Test",
          "steps": [
            "install",
            "jest"
          ]
        },
        {
          "name": "Build",
          "steps": [
            "npm run build"
          ]
        },
        {
          "name": "Deploy",
          "steps": [
            "if: github.ref == 'refs/heads/main'",
            "deploy to GitHub Pages"
          ]
        }
      ]
    },
    "monitoring": "None required - purely client-side",
    "security": "All assets served over HTTPS; no external scripts or libraries"
  },
  "NonFunctionalCompliance": {
    "performance": "60 FPS via requestAnimationFrame; delta-time based physics",
    "reliability": "Try/catch around animation loop; fallback to pause on error",
    "usability": "Intuitive mouse/touch controls; keyboard shortcuts (Space: pause, R: reset)",
    "accessibility": "ARIA labels on buttons; keyboard navigation; high-contrast theme option",
    "security": "No external dependencies; CSP header recommended for production",
    "maintainability": "ES6 module structure, JSDoc comments, README, CI pipeline"
  },
  "TestingStrategy": {
    "unitTests": [
      "PhysicsEngine.updateBall",
      "PhysicsEngine.handleCollision",
      "ScoreManager.increment",
      "AI.update"
    ],
    "integrationTests": [
      "Full game cycle: serve -> score -> reset",
      "Responsive resizing",
      "Touch input handling"
    ],
    "coverageGoal": ">=80% on core logic",
    "testRunner": "Jest",
    "mocking": "Mock canvas context for unit tests"
  }
}